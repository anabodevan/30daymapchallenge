{
  "hash": "1bc57096996b07acf285eac1c6d4a10c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Polygons\"\nauthor: \"Ana Luisa Bodevan\"\ndescription: \"Acesso à rede geral de esgoto\"\nimage: \"03_polygons.png\"\nexecute:\n  warning: false\n  message: false\n  eval: false\nformat:\n  html:\n    code-tools: true\n    code-fold: true\n---\n\n# Day 3 - Polygons\n\n\\|Challenge Classic: Create a map focused on area features (e.g., administrative regions, land use, boundaries). Use fills, patterns, and choropleth techniques.\n\nPara um país que ocupa o décimo lugar no ranking de PIB nominal[^1] o Brasil apresenta estatísticas assustadoras relacionadas ao desenvolvimento socioeconômico e acesso à necessidades básicas. Talvez uma das maiores evidências da gigantesca desigualdade de renda e serviços no país seja a situação do acesso ao saneamento básico. Dados do IBGE 2022 49 milhões de pessoas vivem em condições precárias de esgotamento sanitário[^2], e 90 milhões não possuem acesso à coleta e tratamento de esgoto[^3].\n\n[^1]: <https://www.poder360.com.br/poder-economia/brasil-mantem-se-como-a-10a-maior-economia-do-mundo/>\n\n[^2]: <https://agenciadenoticias.ibge.gov.br/agencia-noticias/2012-agencia-de-noticias/noticias/39237-censo-2022-rede-de-esgoto-alcanca-62-5-da-populacao-mas-desigualdades-regionais-e-por-cor-e-raca-persistem>\n\n[^3]: <https://agenciabrasil.ebc.com.br/direitos-humanos/noticia/2025-08/estudo-aponta-estagnacao-no-saneamento-5-anos-apos-novo-marco-legal>\n\n## Setup\n\n### Carregar bibliotecas\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(pacman)\npacman :: p_load(tidyverse, dplyr, geobr, sidrar, sf, ggtext, showtext, ragg, viridis, ggthemes, cowplot)\n```\n:::\n\n\n### Carregar dados\n\n\n::: {.cell}\n\n```{.r .cell-code}\nesgoto_raw <- get_sidra(\n  x = 6805,\n  variable = 1000381,                     # percentual\n  geo = \"City\",                           # municípios\n  classific = \"c11558\",                   # tipo de esgotamento\n  category = list(\"c11558\" = 46290),      # Rede geral, rede pluvial ou fossa ligada à rede\n  period = \"2022\"\n)\n\nbr_muni <- read_municipality(code_muni = \"all\", year = 2022) # shapefile do brasil por mun\n```\n:::\n\n\n## Limpeza\n\n\n::: {.cell}\n\n```{.r .cell-code}\nesgoto <- esgoto_raw %>%\n  select(\n    code_muni = `Município (Código)`,\n    municipio = Município,\n    perc_rede_geral = Valor\n  ) %>%\n  mutate(\n    code_muni = as.numeric(code_muni)\n  )\n\nbr_mapa <- br_muni %>%\n  left_join(esgoto, by = \"code_muni\")\n\nbr_mapa <- br_mapa %>%\n  mutate(\n    faixa = cut(\n      perc_rede_geral,\n      breaks = c(0, 33, 66, 100),\n      labels = c(\"Baixo\", \"Médio\", \"Alto\"),\n      include.lowest = TRUE\n    )\n  )\n```\n:::\n\n\n## Plot\n\n### Tipografia\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfont_add_google(\"Montserrat\", \"mont\")\nshowtext_auto()\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(br_mapa) +\n\n  geom_sf(aes(fill = perc_rede_geral), color = NA, size = 0) +\n\n  scale_fill_viridis_c(\n    name = NULL,\n    option = \"D\",\n    direction = -1,\n    na.value = \"gray90\"\n  ) +\n\n  labs(\n    title = \"Acesso à Rede Geral de Esgoto no Brasil (2022)\",\n    subtitle = \"62.5% dos domícilios tem acesso à rede de esgoto, ainda assim,\\n49 milhões utilizam recursos precários de esgotamento\",\n    caption = \"#30DayMapChallenge — Day 4: Polygons\\nSource: IBGE/SIDRA | Graphic: Ana Bodevan\"\n  ) +\n\n  theme_map() +\n\n  theme(\n    text = element_text(family = \"mont\", size = rel(1)),\n    plot.title = element_text(size = 20, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 16, hjust = 0.5, color = \"gray30\"),\n\n    legend.position = c(0.15, 0.37),\n    legend.key.width = unit(2.5, \"cm\"),\n    legend.title = element_text(size = 10, face = \"bold\"),\n    legend.text = element_text(size = 9),\n\n    plot.caption = element_text(size = 8, color = \"gray40\", hjust = 0.5, lineheight = 1.3))\n```\n:::\n\n\n![](03_polygons.png){fig-align=\"center\" width=\"740\"}",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}